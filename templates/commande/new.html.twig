{% extends 'front/base.html.twig' %}

{% block title %}New Order - Sportify{% endblock %}

{% block body %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">New Order</h4>
                </div>
                <div class="card-body">
                    {% for message in app.flashes('error') %}
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}

                    {{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}
                        <div class="mb-3">
                            {{ form_label(form.produit, 'Product', {'label_attr': {'class': 'form-label'}}) }}
                            {{ form_widget(form.produit, {'attr': {'class': 'form-select' ~ (form.produit.vars.errors|length ? ' is-invalid' : '')}}) }}
                            <div class="invalid-feedback">
                                {{ form_errors(form.produit) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(form.nomClient, 'Client Name', {'label_attr': {'class': 'form-label'}}) }}
                            {{ form_widget(form.nomClient, {'attr': {'class': 'form-control' ~ (form.nomClient.vars.errors|length ? ' is-invalid' : '')}}) }}
                            <div class="invalid-feedback">
                                {{ form_errors(form.nomClient) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(form.adresseLivraison, 'Delivery Address', {'label_attr': {'class': 'form-label'}}) }}
                            {{ form_widget(form.adresseLivraison, {'attr': {'class': 'form-control' ~ (form.adresseLivraison.vars.errors|length ? ' is-invalid' : '')}}) }}
                            <div class="invalid-feedback">
                                {{ form_errors(form.adresseLivraison) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(form.telephone, 'Phone Number', {'label_attr': {'class': 'form-label'}}) }}
                            {{ form_widget(form.telephone, {'attr': {'class': 'form-control' ~ (form.telephone.vars.errors|length ? ' is-invalid' : '')}}) }}
                            <div class="invalid-feedback">
                                {{ form_errors(form.telephone) }}
                            </div>
                        </div>

                        <div class="mb-3">
                            {{ form_label(form.quantite, 'Quantity', {'label_attr': {'class': 'form-label'}}) }}
                            {{ form_widget(form.quantite, {'attr': {'class': 'form-control' ~ (form.quantite.vars.errors|length ? ' is-invalid' : '')}}) }}
                            <div class="invalid-feedback">
                                {{ form_errors(form.quantite) }}
                            </div>
                        </div>

                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary">Place Order</button>
                            <a href="{{ path('app_commande_index') }}" class="btn btn-secondary">Back to List</a>
                        </div>
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
</div>

{% block javascripts %}
{{ parent() }}
<script>
// Add Bootstrap validation classes
(function () {
    'use strict'
    var forms = document.querySelectorAll('.needs-validation')
    Array.prototype.slice.call(forms)
        .forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
                form.classList.add('was-validated')
            }, false)
        })
})()
</script>
{% endblock %}
{% endblock %} 